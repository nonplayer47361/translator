"""
표준 한글/영문/숫자/약자/특수문자 점자 매핑 테이블 (유니코드-문자 매핑 기반)
- 6점식 기준 (8점식 미지원)
- 각 딕셔너리의 value: [점1, 점2, 점3, 점4, 점5, 점6] (1=볼록, 0=평면)
- 겹받침/복합모음/약자 등은 [ [...], [...] ] (셀 2개 이상)
"""

# 초성 (자음) 점자
INITIAL_TO_BRAILLE = {
    'ㄱ': [0,0,0,1,0,0], 'ㄲ': [[0,0,0,0,0,1],[0,0,0,1,0,0]],
    'ㄴ': [1,0,0,1,0,0], 'ㄷ': [0,1,0,1,0,0], 'ㄸ': [[0,0,0,0,0,1],[1,0,0,1,1,0]],
    'ㄹ': [0,0,0,0,1,0], 'ㅁ': [1,0,0,1,0,0], 'ㅂ': [0,0,0,1,1,0], 'ㅃ': [[0,0,0,0,0,1],[1,1,1,0,1,0]],
    'ㅅ': [0,0,0,0,0,1], 'ㅆ': [0,1,0,1,1,0],
    'ㅇ': [1,1,0,1,1,0], 'ㅈ': [0,0,0,1,0,1], 'ㅉ': [[0,0,0,0,0,1],[0,1,0,1,1,1]],
    'ㅊ': [0,0,0,0,1,1], 'ㅋ': [1,1,0,1,0,0], 'ㅌ': [1,1,0,0,1,0],
    'ㅍ': [1,0,0,1,1,0], 'ㅎ': [0,1,0,1,1,0],
}

# 중성 (모음) 점자
MEDIAL_TO_BRAILLE = {
    'ㅏ': [1,1,0,0,0,1], 'ㅐ': [1,0,1,0,1,0], 'ㅑ': [0,0,1,1,1,0], 'ㅒ': [0,1,1,1,1,0],
    'ㅓ': [0,1,1,1,0,0], 'ㅔ': [1,0,1,1,1,0], 'ㅕ': [1,0,0,0,1,1], 'ㅖ': [0,0,1,1,0,0],
    'ㅗ': [1,0,1,0,0,1], 'ㅘ': [1,1,1,0,0,1], 'ㅙ': [[1,1,1,0,0,1],[1,1,1,0,1,0]], 'ㅚ': [1,0,1,1,1,1],
    'ㅛ': [0,0,1,1,0,1], 'ㅜ': [1,0,1,1,0,0], 'ㅝ': [1,1,1,1,0,0], 'ㅞ': [[1,1,1,1,0,0],[1,1,1,0,1,0]],
    'ㅟ': [[1,0,1,1,0,0],[1,1,1,0,1,0]], 'ㅠ': [1,0,0,1,0,1],
    'ㅡ': [0,1,0,1,0,1], 'ㅢ': [0,1,0,1,1,1], 'ㅣ': [1,0,1,0,1,0],
}

# 종성 (받침) 점자
FINAL_TO_BRAILLE = {
    '':   [0,0,0,0,0,0],  # 받침 없음
    'ㄱ': [1,0,0,0,0,0], 'ㄲ': [[1,0,0,0,0,0],[1,0,0,0,0,0]],
    'ㄴ': [0,1,0,0,1,0], 'ㄷ': [0,0,1,0,1,0],
    'ㄹ': [0,1,0,0,0,0], 'ㅁ': [0,1,0,0,0,1],
    'ㅂ': [1,1,0,0,0,0], 'ㅅ': [0,0,1,0,0,0], 'ㅆ' : [0,0,1,1,0,0],
    'ㅇ': [0,1,1,0,1,1], 'ㅈ': [1,0,1,0,0,0],
    'ㅊ': [0,1,1,0,0,0], 'ㅋ': [0,1,1,0,1,0],
    'ㅌ': [0,1,1,0,0,1], 'ㅍ': [0,1,0,0,1,1],
    'ㅎ': [0,0,1,0,1,1],

    # 겹받침 (2셀)
    'ㄳ': [[1,0,0,0,0,0], [0,0,1,0,0,0]],
    'ㄵ': [[0,1,0,0,1,0], [1,0,1,0,0,0]],
    'ㄶ': [[0,1,0,0,1,0], [0,0,1,0,1,1]],
    'ㄺ': [[0,1,0,0,0,0], [1,0,0,0,0,0]],
    'ㄻ': [[0,1,0,0,0,0], [0,1,0,0,0,1]],
    'ㄼ': [[0,1,0,0,0,0], [1,1,0,0,0,0]],
    'ㄽ': [[0,1,0,0,0,0], [0,0,1,0,0,0]],
    'ㄾ': [[0,1,0,0,0,0], [0,1,1,0,0,1]],
    'ㄿ': [[0,1,0,0,0,0], [0,1,0,0,1,1]],
    'ㅀ': [[0,1,0,0,0,0], [0,0,1,0,1,1]],
    'ㅄ': [[1,1,0,0,0,0], [0,0,1,0,0,0]],
}

# 약자 (낱말 단축형)
HANGUL_BRAILLE_ABBREVIATION = {
    "그래서":     [[1,0,0,0,0,0],[0,1,1,1,0,0]],
    "그러나":     [[1,0,0,0,0,0],[1,0,0,1,0,0]],
    "그러면":     [[1,0,0,0,0,0],[0,1,0,0,1,0]],
    "그러므로":   [[1,0,0,0,0,0],[0,1,0,0,0,1]],
    "그러니까":   [[1,0,0,0,0,0], [0,1,1,1,1,0]],
    "그런데":     [[1,0,0,0,0,0],[1,0,1,1,1,0]],
    "그런즉":     [[1,0,0,0,0,0], [0,1,0,1,1,1]],
    "그리고":     [[1,0,0,0,0,0],[1,0,1,0,0,1]],
    "그리하여":   [[1,0,0,0,0,0],[1,0,0,0,1,1]],
    "하지만":     [[0,1,1,1,1,0], [1,1,1,0,0,0]],
    "하지만은":   [[0,1,1,1,1,0], [1,1,1,0,0,0], [0,1,0,0,1,0]],
    "가" : [1,1,0,1,0,1],
    "나" : [1,0,0,1,0,0],
    "다" : [0,1,0,1,0,0],
    "마" : [1,0,0,0,1,0,],
    "바" : [0,0,0,1,1,0,],
    "사" : [1,1,1,0,0,0],
    "자" : [0,0,0,1,0,1],
    "카" : [1,1,0,1,0,0],
    "타" : [1,1,0,0,1,0],
    "파" : [1,0,0,1,1,0],
    "하" : [0,1,0,1,1,0],
    "억" : [1,0,0,1,1,1],
    "언" : [0,1,1,1,1,1],
    "얼" : [0,1,1,1,1,0],
    "연" : [1,0,0,0,0,1],
    "열" : [1,1,0,0,1,1],
    "영" : [1,1,0,1,1,1],
    "옥" : [1,0,1,1,0,1],
    "온" : [1,1,1,0,1,1],
    "옹" : [1,1,1,1,1,1],
    "운" : [1,1,0,1,1,0],
    "울" : [1,1,1,1,0,1],
    "은" : [1,0,1,0,1,1],
    "을" : [0,1,1,1,0,1],
    "인" : [1,1,1,1,1,0],
    "것" : [[0,0,0,1,1,1],[0,1,1,1,0,0]],
}

# 숫자 점자
NUMBER_TO_BRAILLE = {
    "1" : [[0,0,1,1,1,1],[1,0,0,0,0,0]],
    "2" : [[0,0,1,1,1,1],[1,1,0,0,0,0]],
    "3" : [[0,0,1,1,1,1],[1,0,0,1,0,0]],
    "4" : [[0,0,1,1,1,1],[1,0,0,1,1,0]],
    "5" : [[0,0,1,1,1,1],[1,0,0,0,1,0]],
    "6" : [[0,0,1,1,1,1],[1,1,0,1,0,0]],
    "7" : [[0,0,1,1,1,1],[1,1,0,1,1,0]],
    "8" : [[0,0,1,1,1,1],[1,1,0,0,1,0]],
    "9" : [[0,0,1,1,1,1],[0,1,0,1,0,0]],
    "0" : [[0,0,1,1,1,1],[0,1,0,1,1,0]],
}

# 영어 점자
ALPHABET_TO_BRAILLE = {
    'a': [1,0,0,0,0,0], 'b': [1,1,0,0,0,0], 'c': [1,0,0,1,0,0], 'd': [1,0,0,1,1,0],
    'e': [1,0,0,0,1,0], 'f': [1,1,0,1,0,0], 'g': [1,1,0,1,1,0], 'h': [1,1,0,0,1,0],
    'i': [0,1,0,1,0,0], 'j': [0,1,0,1,1,0], 'k': [1,0,1,0,0,0], 'l': [1,1,1,0,0,0],
    'm': [1,0,1,1,0,0], 'n': [1,0,1,1,1,0], 'o': [1,0,1,0,1,0], 'p': [1,1,1,1,0,0],
    'q': [1,1,1,1,1,0], 'r': [1,1,1,0,1,0], 's': [0,1,1,1,0,0], 't': [0,1,1,1,1,0],
    'u': [1,0,1,0,0,1], 'v': [1,1,1,0,0,1], 'w': [0,1,0,1,1,1], 'x': [1,0,1,1,0,1],
    'y': [1,0,1,1,1,1], 'z': [1,0,1,0,1,1],
}
ENGLISH_TO_BRAILLE = ALPHABET_TO_BRAILLE  # 호환용

# 특수기호 및 문장부호 점자 (일부 예시)
SYMBOL_TO_BRAILLE ={
    "[]" : [[0,0,0,0,1,0],[0,0,0,1,1,0],[1,1,1,0,1,1],[0,0,0,1,1,0],[0,1,1,1,1,1]],
    "//" : [[0,0,0,0,1,0],[0,0,0,1,1,0],[0,0,1,1,0,0],[0,0,0,1,1,0],[0,0,1,1,0,0]],
    "+" : [0,1,0,0,0,1],
    "-" : [0,0,1,0,1,0],
    "*" : [1,0,0,0,0,1],
    "/" : [[0,0,1,1,0,0],[0,0,1,1,0,0]],
    "=" : [[0,1,0,0,1,0],[0,1,0,0,1,0]],
    "<" : [[0,0,1,0,1,0],[0,0,1,0,1,0]],
    ">" : [[0,1,0,0,0,1],[0,1,0,0,0,1]],
    "." : [0,1,0,0,1,1],
    "?" : [0,1,1,0,0,1],
    "!" : [0,1,1,0,1,0], "," : [0,0,0,0,1,0],
    "·" : [[0,0,0,0,1,0],[0,1,1,0,0,0]],
    ":" : [[0,0,0,0,1,0],[0,1,0,0,0,0]],
    "/" : [[0,0,0,1,1,1],[0,0,1,1,0,0]],
    "“" : [0,1,1,0,0,1],
    "”" : [0,0,1,0,1,1],
    "‘" : [[0,0,0,0,0,1],[0,1,1,0,0,1]],
    "’" : [[0,0,1,0,1,1],[0,0,1,0,0,0]],
    "(" : [[0,1,1,0,0,1],[0,0,1,0,0,0]],
    ")" : [[0,0,0,0,0,1],[0,0,1,0,1,1]],
    "{" : [[0,1,1,0,0,1],[0,1,0,0,0,0]],
    "}" : [[0,0,0,0,1,0],[0,0,1,0,1,1]],
    "[" : [[0,1,1,0,0,1],[0,1,1,0,0,0]],
    "]" : [[0,0,0,0,1,1],[0,0,1,0,1,1]],
    "―" : [[0,0,1,0,0,1],[0,0,1,0,0,1]],
    "-" : [0,0,1,0,0,1], "~" : [[0,0,0,1,0,0],[0,0,1,0,1,0]],
    "￦" : [[0,0,1,0,1,1],[0,0,0,1,0,0],[0,1,0,1,1,1]],
    "$" : [[0,0,1,0,1,1],[0,0,0,1,0,0],[0,1,1,1,0,0]],
    "%" : [[0,0,1,0,1,1],[1,1,1,1,0,0]],
    "@" : [[0,0,0,1,0,0],[1,0,0,0,0,0]],
    "^" : [[0,0,0,1,0,0],[0,1,0,0,0,1]],
    "#" : [[0,0,0,1,1,1],[1,0,0,1,1,1]],
    "_" : [[0,0,0,1,1,1],[0,0,1,0,0,1]],
    '&': [[0,0,0,1,0,0],[1,1,1,1,0,1]],
}

def tupleize(cell):
    """리스트(점자 배열)를 튜플로 변환 (dict 키로 사용 가능하게)"""
    if isinstance(cell, list):
        if isinstance(cell[0], list):  # 2셀 이상 (ex: 겹받침, 약자 등)
            return tuple(tuple(c) for c in cell)
        else:
            return tuple(cell)
    return cell

def make_reverse_table(table):
    """{문자: 점자배열} → {점자배열(튜플): 문자} 역변환 테이블 생성"""
    rev = {}
    for k, v in table.items():
        key = tupleize(v)
        rev[key] = k
    return rev

# 역변환 테이블 자동 생성
REVERSE_INITIAL_TO_BRAILLE = make_reverse_table(INITIAL_TO_BRAILLE)
REVERSE_MEDIAL_TO_BRAILLE = make_reverse_table(MEDIAL_TO_BRAILLE)
REVERSE_FINAL_TO_BRAILLE = make_reverse_table(FINAL_TO_BRAILLE)
REVERSE_NUMBER_TO_BRAILLE = make_reverse_table(NUMBER_TO_BRAILLE)
REVERSE_ALPHABET_TO_BRAILLE = make_reverse_table(ALPHABET_TO_BRAILLE)
REVERSE_ENGLISH_TO_BRAILLE = REVERSE_ALPHABET_TO_BRAILLE  # 호환용
REVERSE_SYMBOL_TO_BRAILLE = make_reverse_table(SYMBOL_TO_BRAILLE)
REVERSE_HANGUL_BRAILLE_ABBREVIATION = make_reverse_table(HANGUL_BRAILLE_ABBREVIATION)
